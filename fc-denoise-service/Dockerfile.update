# 基于现有的v3.0-4vcpu-ultimate镜像更新
FROM fc-denoise:v3.0-4vcpu-ultimate

# 复制更新后的Python文件
COPY src/fc_denoise_server.py /app/fc_denoise_server.py
COPY src/zipenhancer_streaming.py /app/zipenhancer_streaming.py

# 简化版环境变量 (移除预热功能)
ENV FC_OPTIMIZATION=lazy-loading

# 确保监听端口正确 (FC健康检查端口)
EXPOSE 9000

# 启动命令
CMD ["python", "fc_denoise_server.py"]